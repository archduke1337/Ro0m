@tailwind base;
@tailwind components;
@tailwind utilities;

/* ========================================
   SwiftUI-Inspired Minimalist Theme
   CSS Variables for Light/Dark Mode
   ======================================== */

@layer base {
  :root {
    /* Light mode colors */
    --bg-primary: 255 255 255;
    --bg-secondary: 249 249 249;
    --bg-tertiary: 242 242 247;
    --bg-elevated: 255 255 255;

    --fg-primary: 0 0 0;
    --fg-secondary: 99 99 102;
    --fg-tertiary: 142 142 147;
    --fg-muted: 174 174 178;

    --accent-muted: 0 0 0 / 0.05;
    --accent-hover: 0 0 0 / 0.03;

    --border-default: 0 0 0 / 0.1;
    --border-subtle: 0 0 0 / 0.05;
    --border-strong: 0 0 0 / 0.15;

    --background: 240 10% 3.9%;
    --foreground: 0 0% 98%;

    /* Dynamic Accents - Updated by Palette Sync */
    --accent-primary: 255, 255, 255;
    --accent-primary-muted: 255, 255, 255, 0.15;

    --card: 240 10% 3.9%;
    --card-foreground: 0 0% 98%;
    --popover: 240 10% 3.9%;
    --popover-foreground: 0 0% 98%;
    --primary: 0 0% 98%;
    --primary-foreground: 240 5.9% 10%;
    --secondary: 240 3.7% 15.9%;
    --secondary-foreground: 0 0% 98%;
    --muted: 240 3.7% 15.9%;
    --muted-foreground: 240 5% 64.9%;
    --accent: 240 3.7% 15.9%;
    --accent-foreground: 0 0% 98%;
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 0 0% 98%;
    --border: 240 3.7% 15.9%;
    --input: 240 3.7% 15.9%;
    --ring: 240 4.9% 83.9%;
    --radius: 1rem;
  }

  .dark {
    /* Dark mode colors */
    --bg-primary: 0 0 0;
    --bg-secondary: 10 10 10;
    --bg-tertiary: 20 20 20;
    --bg-elevated: 28 28 30;

    --fg-primary: 255 255 255;
    --fg-secondary: 161 161 166;
    --fg-tertiary: 99 99 102;
    --fg-muted: 72 72 74;

    --accent-muted: 255 255 255 / 0.1;
    --accent-hover: 255 255 255 / 0.05;

    --border-default: 255 255 255 / 0.1;
    --border-subtle: 255 255 255 / 0.05;
    --border-strong: 255 255 255 / 0.2;
  }
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

/* Custom scrollbar - minimal */
::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.1);
  border-radius: 3px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.2);
}

/* Selection styling */
::selection {
  background: rgba(255, 255, 255, 0.2);
  color: #ffffff;
}

/* ======== Stream SDK Overrides - Minimal Theme ======== */
.str-video__call-stats {
  max-width: 500px;
  position: relative;
  background: #1c1c1e;
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 12px;
}

.str-video__speaker-layout__wrapper {
  max-height: 700px;
}

.str-video__participant-details {
  color: white;
}

.str-video__menu-container {
  color: white;
  background: #1c1c1e;
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 12px;
}

.str-video__notification {
  color: white;
  background: #1c1c1e;
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 12px;
}

.str-video__participant-list {
  background-color: #1c1c1e;
  padding: 16px;
  border-radius: 12px;
  color: white;
  height: 100%;
  border: 1px solid rgba(255, 255, 255, 0.05);
}

.str-video__call-controls__button {
  height: 44px;
  width: 44px;
  border-radius: 12px;
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.05);
  transition: all 0.2s ease;
}

.str-video__call-controls__button:hover {
  background: rgba(255, 255, 255, 0.15);
}

/* ======== Clerk Overrides - Minimal Theme ======== */
.cl-userButtonPopoverActionButtonIcon {
  color: white;
}

.cl-logoBox {
  height: 40px;
}

.cl-dividerLine {
  background: rgba(255, 255, 255, 0.1);
  height: 1px;
}

.cl-socialButtonsIconButton {
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  background: transparent;
  transition: all 0.2s ease;
}

.cl-socialButtonsIconButton:hover {
  background: rgba(255, 255, 255, 0.05);
}

.cl-internal-wkkub3 {
  color: white;
}

.cl-userButtonPopoverActionButton {
  color: white;
}

/* ======== Utility Classes ======== */
@layer utilities {
  .flex-center {
    @apply flex items-center justify-center;
  }

  .flex-between {
    @apply flex items-center justify-between;
  }

  /* Glass morphism - SwiftUI vibrancy effect */
  .glass {
    background: rgba(28, 28, 30, 0.8);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.05);
  }

  .glass-subtle {
    background: rgba(255, 255, 255, 0.03);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.05);
  }

  /* Swift-style card */
  .swift-card {
    @apply rounded-swift-lg bg-bg-elevated border border-border-subtle;
    @apply transition-all duration-200 ease-out;
  }

  .swift-card:hover {
    @apply border-border bg-bg-tertiary;
  }

  /* Swift-style button */
  .swift-button {
    @apply rounded-swift px-4 py-2.5 font-medium text-sm;
    @apply bg-fg-primary text-bg-primary;
    @apply transition-all duration-200 ease-out;
    @apply hover:opacity-90 active:scale-[0.98];
  }

  .swift-button-secondary {
    @apply rounded-swift px-4 py-2.5 font-medium text-sm;
    @apply bg-accent-muted text-fg-primary border border-border-subtle;
    @apply transition-all duration-200 ease-out;
    @apply hover:bg-accent-hover hover:border-border;
  }

  /* Text gradient */
  .text-gradient {
    @apply bg-gradient-to-r from-fg-primary to-fg-secondary bg-clip-text text-transparent;
  }
}

/* ======== Animation Classes ======== */
.animate-bounce-subtle {
  animation: bounce-subtle 2s infinite;
}

@keyframes bounce-subtle {
  0%,
  100% {
    transform: translateY(-5%);
    animation-timing-function: cubic-bezier(0.8, 0, 1, 1);
  }
  50% {
    transform: translateY(0);
    animation-timing-function: cubic-bezier(0, 0, 0.2, 1);
  }
}

/* Active Speaker Highlighting */
.str-video__participant-view--speaking {
  position: relative;
  transition: all 0.3s ease;
}

.str-video__participant-view--speaking::after {
  content: '';
  position: absolute;
  inset: 0;
  border: 2px solid rgb(var(--accent-primary));
  border-radius: inherit;
  box-shadow: 0 0 20px rgba(var(--accent-primary), 0.2);
  pointer-events: none;
  animation: breathe-border 2s infinite ease-in-out;
  z-index: 10;
}

/* Cinematic Focus Mode */
.focus-mode-active
  .str-video__participant-view:not(.str-video__participant-view--speaking) {
  opacity: 0.4;
  filter: grayscale(0.5) blur(2px);
  scale: 0.98;
  transition: all 0.5s cubic-bezier(0.16, 1, 0.3, 1);
}

.focus-mode-active .str-video__participant-view--speaking {
  scale: 1.02;
  z-index: 20;
  transition: all 0.5s cubic-bezier(0.16, 1, 0.3, 1);
}

.portrait-blur {
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
}

@keyframes breathe-border {
  0%,
  100% {
    opacity: 0.4;
    transform: scale(1);
  }
  50% {
    opacity: 1;
    transform: scale(1.005);
  }
}

.show-block {
  width: 100%;
  max-width: 350px;
  display: block;
  animation: show 0.4s cubic-bezier(0.16, 1, 0.3, 1) forwards;
}

@keyframes show {
  0% {
    opacity: 0;
    width: 0;
    transform: translateX(-10px);
  }
  100% {
    opacity: 1;
    width: 100%;
    transform: translateX(0);
  }
}

/* Subtle hover animation for interactive elements */
.hover-lift {
  transition:
    transform 0.2s ease,
    box-shadow 0.2s ease;
}

.hover-lift:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
}

/* Legacy glassmorphism classes (for compatibility) */
.glassmorphism {
  background: rgba(255, 255, 255, 0.05);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  border: 1px solid rgba(255, 255, 255, 0.1);
}

.glassmorphism2 {
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.05);
}
